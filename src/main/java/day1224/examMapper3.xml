<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="day1224">
	<!-- 컬럼하나에 한행 조회 
		부서번호를 입력(parameterType="int" 또는 integer)받아서 
		부서명(resultType="String")을 검색
		
		String dname = ss.selectOne("scsr",부서번호);
	-->
	<select id="scsr" parameterType="integer" resultType="String">
	select		dname
	from		dept
	where		deptno=#{deptno}
	</select>
	
	
	<!-- 컬럼하나에 여러행 조회 
		 부서번호를 입력(parameterType="int") 받아서 부서에 속한 
		 모든 사원명(resultType="String")을 검색
		 List<String> list= ss.selectList("아이디",부서번호);
	-->
	<select id="scmr" parameterType="int" resultType="String">
	select		ename
	from		emp
	where		deptno=#{deptno}
	
	</select>
	
	<!-- 컬럼여러개에 한행 조회(DTO사용 > typeAlias를 사용)
		 사원번호를 입력받아서 사원명,직무,연봉,입사일,매니저번호,부서번호 검색
	 -->
	<select id="mcsr" parameterType="Integer" resultType="eDTO">
	select		ename, job, sal, hiredate, mgr, deptno, 
				to_char(hiredate,'yyyy-mm-dd hh24') AS strHiredate
	from		emp
	where		empno=#{empno}
	
	
	</select>	
	
	
	<!-- 조회 컬럼과 method를 개발자가 수동으로 연결
	<resultMap>
	  -->

	  <resultMap type="eDTO" id="eDtoResult">
	  <result column="EMPNO" property="empno"/>	  
	  <result column="ename" property="ename"/>	  
	  <result column="job" property="job"/>	  
	  <result column="sal" property="sal"/>	  
	  <result column="hiredate" property="hiredate"/>	  
	  <result column="mgr" property="mgr"/>	  
	  <result column="deptno" property="deptno"/>	  
	  <result column="strHiredate" property="strHiredate"/>	  
	   <!-- 컬럼명은 대소문자상관x method(property)는 대소문자 구분O --> 
	  																					
	  </resultMap>
	  
	<!-- 컬럼여러개에 여러행 조회 -->
	<select id="mcmr" parameterType="Integer" resultMap="eDtoResult">
	select		empno, ename, job, sal, hiredate, mgr, deptno, 
				to_char(hiredate,'yyyy-mm-dd hh24') AS strHiredate
	from		emp
	where		deptno=#{deptno}
	
	</select>	
	<!-- like 조회 -->
	<!-- < 작다 조회 -->
	<!-- > 크다 조회 -->
	
	<!-- subquery -->
	<!-- union -->
	<!-- join -->
	<!-- subquery & join -->
	<!-- $의 사용 -->
	
	<!-- dynamic query : if -->
	<!-- dynamic query : choose -->
	<!-- dynamic query : forEach -->
	<!-- dynamic query : set -->
	<!-- PL/SQL insert, update, delete, cursor -->
</mapper>